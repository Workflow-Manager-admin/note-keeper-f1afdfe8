{"is_source_file": true, "format": "Python", "description": "This file contains Python source code defining Pydantic models for notes, a storage class to manage notes in memory or with SQLite persistence, including CRUD operations, threading for concurrency safety, and database initialization.", "external_files": ["sqlite3", "threading", "pydantic"], "external_methods": ["sqlite3.connect", "sqlite3.Cursor.execute", "sqlite3.Cursor.fetchall", "sqlite3.Cursor.fetchone"], "published": ["Note", "NoteCreate", "NoteStorage"], "classes": [{"name": "Note", "description": "Pydantic model representing a note object with id, title, content, creation timestamp, and update timestamp."}, {"name": "NoteCreate", "description": "Pydantic model for creating a new note, excluding metadata like id and timestamps."}, {"name": "NoteStorage", "description": "Class managing storage of notes, supporting in-memory or SQLite persistence, with thread safety and CRUD methods."}], "methods": [{"name": "__init__(self, db_path: Optional[str] = None)", "description": "Initializes the storage; sets up in-memory or SQLite database based on provided path.", "scope": "NoteStorage", "scopeKind": "class"}, {"name": "_init_db(self)", "description": "Creates the notes table in the SQLite database if it does not exist.", "scope": "NoteStorage", "scopeKind": "class"}, {"name": "Note _from_row(self, row)", "description": "Converts a database row into a Note object.", "scope": "NoteStorage", "scopeKind": "class"}, {"name": "Note add_note(self, note_create: NoteCreate)", "description": "Adds a new note to storage, assigns an ID, and stores creation and update timestamps.", "scope": "NoteStorage", "scopeKind": "class"}, {"name": "Optional[Note] get_note(self, note_id: int)", "description": "Retrieves a note by its ID from storage.", "scope": "NoteStorage", "scopeKind": "class"}, {"name": "List[Note] list_notes(self)", "description": "Returns a list of all notes stored.", "scope": "NoteStorage", "scopeKind": "class"}, {"name": "Optional[Note] update_note(self, note_id: int, note_create: NoteCreate)", "description": "Updates an existing note's content and timestamps.", "scope": "NoteStorage", "scopeKind": "class"}, {"name": "bool delete_note(self, note_id: int)", "description": "Deletes a note by its ID from storage.", "scope": "NoteStorage", "scopeKind": "class"}], "calls": ["sqlite3.connect", "conn.execute", "conn.cursor", "cur.execute", "cur.fetchone", "cur.fetchall"], "search-terms": ["NoteStorage", "add_note", "SQLite persistence", "thread-safe", "CRUD notes"], "state": 2, "file_id": 5, "knowledge_revision": 11, "git_revision": "74ea88ba332bf9f5a51c8f29e82d9a5526437bf3", "ctags": [{"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^class Note(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^class NoteCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteStorage", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^class NoteStorage:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    def __init__(self, db_path: Optional[str] = None):$/", "language": "Python", "kind": "member", "signature": "(self, db_path: Optional[str] = None)", "scope": "NoteStorage", "scopeKind": "class"}, {"_type": "tag", "name": "_from_row", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    def _from_row(self, row) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "member", "signature": "(self, row)", "scope": "NoteStorage", "scopeKind": "class"}, {"_type": "tag", "name": "_init_db", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    def _init_db(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "NoteStorage", "scopeKind": "class"}, {"_type": "tag", "name": "add_note", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    def add_note(self, note_create: NoteCreate) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "member", "signature": "(self, note_create: NoteCreate)", "scope": "NoteStorage", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    content: str = Field(..., description=\"Content of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    content: str = Field(..., description=\"Content of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    created_at: datetime = Field(..., description=\"Timestamp when the note was created\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    def delete_note(self, note_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, note_id: int)", "scope": "NoteStorage", "scopeKind": "class"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    def get_note(self, note_id: int) -> Optional[Note]:$/", "language": "Python", "typeref": "typename:Optional[Note]", "kind": "member", "signature": "(self, note_id: int)", "scope": "NoteStorage", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier for the note\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    def list_notes(self) -> List[Note]:$/", "language": "Python", "typeref": "typename:List[Note]", "kind": "member", "signature": "(self)", "scope": "NoteStorage", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    title: str = Field(..., description=\"Title of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    title: str = Field(..., description=\"Title of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    def update_note(self, note_id: int, note_create: NoteCreate) -> Optional[Note]:$/", "language": "Python", "typeref": "typename:Optional[Note]", "kind": "member", "signature": "(self, note_id: int, note_create: NoteCreate)", "scope": "NoteStorage", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/note-keeper-f1afdfe8/notes_backend/src/api/models.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Timestamp when the note was last updated\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Note", "scopeKind": "class"}], "hash": "7678ee2af00e912267b19da1adca603e", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/models.py", "fields": [{"name": "str content", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime created_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"11": "74ea88ba332bf9f5a51c8f29e82d9a5526437bf3"}]}